<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AI Interview Generator — Dark Mode</title>
<meta name="description" content="Generate interview questions and model answers with AI." />
<style>
  :root{
    --bg:#0b0f16;
    --card:#0f1720;
    --muted:#9ca3af;
    --accent:#4f8ef7;
    --glass: rgba(255,255,255,0.04);
    --radius:14px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: radial-gradient(1200px 600px at 10% 10%, rgba(79,142,247,0.06), transparent 10%),
                radial-gradient(900px 400px at 90% 90%, rgba(64,182,109,0.03), transparent 10%),
                var(--bg);
    color:#e6eef8;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    padding:28px;
  }

  .wrap{max-width:980px;margin:0 auto}

  header{display:flex;align-items:center;gap:14px;margin-bottom:20px}
  .logo{
    width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,#2563eb,#7c3aed);
    display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:18px;box-shadow:0 8px 30px rgba(37,99,235,0.12)
  }
  h1{margin:0;font-size:20px}
  p.lead{margin:4px 0 0;color:var(--muted);font-size:13px}

  .card{
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border: 1px solid rgba(255,255,255,0.03);
    border-radius:var(--radius);
    padding:20px;
    box-shadow: 0 10px 30px rgba(2,6,23,0.6);
    margin-bottom:18px;
    backdrop-filter: blur(6px);
  }

  .grid{display:grid;grid-template-columns:1fr 320px;gap:18px}
  @media (max-width:880px){.grid{grid-template-columns:1fr}}

  label{display:block;font-weight:600;margin-bottom:6px;color:#dbeafe}
  .field{margin-bottom:12px}

  input[type="text"], input[type="number"], select, textarea{
    width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);
    background: rgba(255,255,255,0.02); color: #e6eef8; font-size:14px;
  }
  textarea{min-height:120px;resize:vertical}

  .controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  button.btn{
    background:linear-gradient(180deg,var(--accent), #1e63d6);
    color:#fff;border:none;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700;
    box-shadow: 0 8px 22px rgba(31,64,128,0.22); transition: transform .13s ease, box-shadow .13s ease;
  }
  button.btn:hover{ transform: translateY(-3px); box-shadow:0 14px 30px rgba(31,64,128,0.28) }
  button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:10px 12px;border-radius:10px;cursor:pointer}
  .muted{color:var(--muted);font-size:13px}

  .results-area{margin-top:14px}

  .question-card{
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
    border-radius:12px;padding:14px;margin-bottom:12px;border:1px solid rgba(255,255,255,0.03);
    display:flex;justify-content:space-between;gap:12px;align-items:flex-start;transition: transform .12s ease, box-shadow .12s ease;
  }
  .question-card:hover{ transform: translateY(-6px); box-shadow: 0 12px 36px rgba(2,6,23,0.6) }
  .q-left{flex:1}
  .q-meta{font-size:13px;color:var(--muted);margin-top:8px}
  .q-answer{margin-top:8px;color:#e6eef8}
  .q-actions{display:flex;flex-direction:column;gap:8px;align-items:flex-end}

  .small-btn{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:8px;color:var(--accent);cursor:pointer;font-weight:700}

  .center{display:flex;align-items:center;gap:10px}
  .spinner{width:18px;height:18px;border-radius:50%;border:3px solid rgba(255,255,255,0.08);border-top-color:var(--accent);animation:spin 1s linear infinite;display:inline-block}
  @keyframes spin{to{transform:rotate(360deg)}}

  footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}

  @media (max-width:480px){
    body{padding:14px}
    .logo{width:48px;height:48px}
    .grid{grid-template-columns:1fr}
  }

  /* subtle entrance animations */
  .fade-up { opacity: 0; transform: translateY(8px); animation: fadeUp .45s forwards; }
  @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }

</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">AI</div>
      <div>
        <h1>AI Interview Question Generator</h1>
        <p class="lead">Generate tailored interview questions and concise model answers — built by Vineeth.</p>
      </div>
    </header>

    <div class="grid">
      <!-- left: form & results -->
      <div>
        <div class="card fade-up" style="margin-bottom:14px">
          <div class="field">
            <label for="role">Role / Job title</label>
            <input id="role" placeholder="e.g. Frontend Developer (React)" value="Frontend Developer" />
          </div>

          <div class="field" style="display:flex;gap:12px">
            <div style="flex:1">
              <label for="level">Experience level</label>
              <select id="level">
                <option>Junior</option>
                <option>Mid</option>
                <option>Senior</option>
              </select>
            </div>
            <div style="width:120px">
              <label for="count">Questions</label>
              <input id="count" type="number" min="1" max="15" value="5" />
            </div>
          </div>

          <div class="controls" style="margin-top:8px">
            <button id="generate" class="btn">Generate Questions</button>
            <button id="clear" class="ghost">Clear</button>
            <div id="status" class="muted" style="margin-left:auto"></div>
          </div>

          <div id="help" class="muted" style="margin-top:12px">Tip: be specific — "Backend Engineer (Node.js + DB)" returns better questions.</div>
        </div>

        <div class="card results-area fade-up" id="resultsCard" style="display:none">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
            <strong>Generated Questions</strong>
            <div>
              <button id="downloadJson" class="small-btn">Download JSON</button>
            </div>
          </div>
          <div id="results"></div>
        </div>
      </div>

      <!-- right: info panel -->
      <aside>
        <div class="card fade-up">
          <h3 style="margin:0 0 8px">How it works</h3>
          <p class="muted">Your request is sent to a secure backend which queries the OpenAI model and returns structured JSON (questions + answers).</p>
          <hr style="border:none;height:1px;background:rgba(255,255,255,0.03);margin:12px 0">
          <p style="margin:8px 0" class="muted"><strong>Privacy</strong>: API keys remain on the server only; user prompts are forwarded to the model.</p>
          <p style="margin:8px 0" class="muted"><strong>Use cases</strong>: interview prep, hiring tests, mock interviews.</p>
          <div style="margin-top:12px" class="muted small">Built by Vineeth • Reuse & customize freely.</div>
        </div>
      </aside>
    </div>

    <footer>Made with ⚡ by Vineeth — try "Data Engineer" + "Senior" + 8 questions for a pro set.</footer>
  </div>

  <script>
    // Replace with your Render backend URL if different
    const API_URL = "https://ai-interview-generator-backend.onrender.com/generate-interview";

    const generateBtn = document.getElementById("generate");
    const clearBtn = document.getElementById("clear");
    const statusEl = document.getElementById("status");
    const resultsCard = document.getElementById("resultsCard");
    const resultsEl = document.getElementById("results");
    const downloadJsonBtn = document.getElementById("downloadJson");

    function setLoading(on){
      if(on){
        statusEl.innerHTML = '<span class="center"><span class="spinner"></span> Generating...</span>';
        generateBtn.disabled = true;
      } else {
        statusEl.textContent = "";
        generateBtn.disabled = false;
      }
    }

    async function generate(){
      const role = document.getElementById("role").value.trim() || "Software Engineer";
      const level = document.getElementById("level").value;
      const count = Number(document.getElementById("count").value) || 5;

      resultsEl.innerHTML = "";
      resultsCard.style.display = "none";
      setLoading(true);

      try {
        const resp = await fetch(API_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ role, level, count })
        });

        if (!resp.ok) {
          const txt = await resp.text();
          throw new Error(txt || resp.statusText || "Server error");
        }

        const data = await resp.json();
        if (!data || !data.ok || !data.data || !Array.isArray(data.data.questions)) {
          throw new Error("Invalid response from server");
        }

        const questions = data.data.questions;
        resultsCard.style.display = "block";
        setLoading(false);

        // animate and render results
        questions.forEach((q, i) => {
          const div = document.createElement("div");
          div.className = "question-card fade-up";
          div.innerHTML = `
            <div class="q-left">
              <div><strong>Q${i+1}. ${escapeHtml(q.question)}</strong></div>
              <div class="q-meta">Difficulty: ${escapeHtml(q.difficulty || "Medium")}</div>
              <div class="q-answer">${escapeHtml(q.modelAnswer)}</div>
            </div>
            <div class="q-actions">
              <button class="small-btn" data-copy="${encodeURIComponent(q.question + " — " + q.modelAnswer)}">Copy</button>
            </div>
          `;
          resultsEl.appendChild(div);
          // slight stagger
          div.style.animationDelay = (i * 0.06) + "s";
        });

      } catch (err) {
        console.error(err);
        setLoading(false);
        statusEl.textContent = "❌ Error: " + (err.message || "Server error");
      }
    }

    function escapeHtml(s){ if(!s) return ""; return s.replace(/[&<>"']/g, function(m){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]; }); }

    document.addEventListener("click", (e) => {
      if (e.target && e.target.dataset && e.target.dataset.copy) {
        const text = decodeURIComponent(e.target.dataset.copy);
        navigator.clipboard.writeText(text).then(()=> {
          e.target.textContent = "Copied";
          setTimeout(()=> e.target.textContent = "Copy", 1200);
        }).catch(()=> alert("Copy failed"));
      }
    });

    clearBtn.addEventListener("click", () => {
      document.getElementById("role").value = "";
      document.getElementById("level").value = "Junior";
      document.getElementById("count").value = 5;
      resultsEl.innerHTML = ""; resultsCard.style.display = "none";
      statusEl.textContent = "";
    });

    generateBtn.addEventListener("click", generate);

    downloadJsonBtn.addEventListener("click", () => {
      const items = Array.from(resultsEl.querySelectorAll(".question-card")).map(div => {
        const q = div.querySelector(".q-left > div > strong").innerText.replace(/^\s*Q\d+\.\s*/,"");
        const difficulty = div.querySelector(".q-meta").innerText.replace("Difficulty: ","").trim();
        const modelAnswer = div.querySelector(".q-answer").innerText.trim();
        return { question: q, difficulty, modelAnswer };
      });
      const blob = new Blob([JSON.stringify({ questions: items }, null, 2)], {type:"application/json"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url; a.download = "interview-questions.json"; document.body.appendChild(a); a.click(); a.remove();
    });

  </script>
</body>
</html>
